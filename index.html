<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DataViz RGDS</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- FRONT SECTION -->
  <section id="front-section">
    <div class="front-overlay"></div>
    <div class="front-content">
      <h1 class="front-title">Rascimo Ambiental</h1>
      <h2 class="front-subtitle">Uma análise sociocomunicacional das representações nas redes sociais</h2>
      <p class="front-authors">Nome e Sobrenome</p>
      <button id="open-analises">Ver Análises</button>
    </div>

    <!-- Painel de Informações -->
    <div id="info-panel">
      <button id="close-btn">✖</button>

      <div id="info-menu">
        <h2>Menu de Informações</h2>
        <button class="info-tab" data-tab="general">🟡 Análise Geral</button>
        <button class="info-tab" data-tab="context">🟢 Base de Dados</button>
        <button class="info-tab" data-tab="graph">🔵 Organização do Grafo</button>
        <button class="info-tab" data-tab="tools">🔴 Ferramentas Utilizadas</button>
      </div>

      <div id="info-content">
        <div class="info-section" id="general">
            <button class="back-to-menu">🡄</button>
            <div class="info-wrapper">
              <h3>🟡 Análise Geral</h3>
              <p>...</p>
            </div>
          </div>                 
        
        <div class="info-section" id="context">
            <button class="back-to-menu">🡄</button>
            <div class="info-wrapper">
              <h3>🟢 Base de Dados</h3>
              <p>Seu conteúdo aqui...</p>
            </div>
          </div>          

        <div class="info-section" id="graph">
            <button class="back-to-menu">🡄</button>
            <div class="info-wrapper">
              <h3>🔵 Organização do Grafo</h3>
              <p>Seu conteúdo aqui...</p>
            </div>
          </div>          

        <div class="info-section" id="tools">
            <button class="back-to-menu">🡄</button>
            <div class="info-wrapper">
              <h3>🔴 Ferramentas Utilizadas</h3>
              <p>Seu conteúdo aqui...</p>
            </div>
          </div>          
      </div>

    </div>
  </section>

  <!-- GRAFO SECTION -->
  <section id="grafo-section">
    <div id="grafo-container">
    <div id="zoom-controls">
        <button id="zoom-in">＋</button>
        <button id="zoom-out">－</button>
        <button id="zoom-reset">⭯</button>
    </div>      

    <div class="legend-container">
      <div class="legend-title">📌 Legenda</div>
      <div class="legend-items"></div>
    </div>

    <div class="rotation-control">
      <label for="rotation-slider">Rotação:</label>
      <input type="range" id="rotation-slider" min="0" max="360" value="0" step="1">
      <span id="rotation-value">0°</span>
    </div>

    <div id="mini-menu">
      <button class="mini-tab" data-action="explore">🔍 Explorar Cluster</button>
    </div>

   <!-- Painel Explorar Cluster -->
   <div id="explorar-cluster-panel">
    <button id="close-explorar" class="close-btn">✖</button>
    <h2>🔍 Explorar Cluster</h2>

      <!-- Dropdown para selecionar cluster -->
      <select id="cluster-select">
        <option value="">Selecione um cluster...</option>
        <option value="Racismo Ambiental + Enchentes">Racismo Ambiental + Enchentes</option>
        <option value="Imprensa e redes sociais">Imprensa e redes sociais</option>
        <option value="Enchente - RS">Enchente - RS</option>
        <option value="Racismo ambiental">Racismo ambiental</option>
        <option value="Ajuda">Ajuda</option>
        <option value="Rio de Janeiro">Rio de Janeiro</option>
      </select>

      <!-- Informações rápidas do cluster -->
      <div id="cluster-info" class="cluster-info">
        <h4>📊 Informações Rápidas</h4>
        <p>Total de Posts: -</p>
        <p>Total de Autores: -</p>
        <p>Likes Médios: -</p>
        <p>Comentários Médios: -</p>
        <p>Engajamento Médio: -</p>
        <p>Top Autor: -</p>
      </div>

      <!-- Posts relevantes do cluster -->
      <div id="cluster-posts" class="cluster-posts">
        <h4>📌 Posts do Cluster</h4>
        <p>Selecione um cluster para visualizar os posts...</p>
      </div>
    </div>
  </div> 
</section>

  <!-- TIMELINE SECTION -->
  <section id="timeline-section">
    <div class="timeline-content">
      <h2>📆 Linha do Tempo (em construção)</h2>
      <p>Essa seção será dedicada à visualização temporal dos dados, permitindo uma análise cronológica das publicações.</p>
    </div>
  </section>

<!-- Scripts -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="script_grafo.js"></script>
<script src="interface.js"></script>


<script>
document.addEventListener("DOMContentLoaded", function () {
  const grafoContainer = document.getElementById('grafo-container');
  const section2 = document.getElementById('grafo-section');
  let graphCreated = false;

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        if (!graphCreated) {
          drawGraph();
          graphCreated = true;
        }
        grafoContainer.style.display = 'block';
      } else {
        grafoContainer.innerHTML = ""; // limpa o SVG
        graphCreated = false;
        grafoContainer.style.display = 'none';
      }
    });
  }, { threshold: 0.5 });

  observer.observe(section2);
});
</script>

</body>
</html>
